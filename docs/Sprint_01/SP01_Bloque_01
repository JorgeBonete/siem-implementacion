# SPRINT 1: TAREA 1 - Configuraci√≥n Inicial de Red, Nombres de Host y DNS üåê

---

El Sprint 1 se enfoc√≥ en establecer una infraestructura de red s√≥lida, configurar servicios esenciales y aplicar medidas de hardening b√°sicas y cruciales en las m√°quinas virtuales (VMs) que alojar√°n los componentes del SIEM.

**Fecha de Completado del Sprint 1:** 03 de Julio de 2025 üóìÔ∏è

### Detalles de las M√°quinas Virtuales Provisionadas: üöÄ

A continuaci√≥n, se listan las especificaciones de red para cada una de las VMs que se utilizar√°n en el proyecto:

* **VM1 (Rol: Wazuh Manager)**
    * **Nombre de Host (Hostname):** `nodo-coordinadorwz.dominio.com.ec`
    * **Direcci√≥n IP:** `192.168.1.10`

* **VM2 (Rol: Wazuh Indexer & Dashboard)**
    * **Nombre de Host (Hostname):** `nodo-datoswz.dominio.com.ec`
    * **Direcci√≥n IP:** `192.168.1.20`

‚ú® --- ‚ú®

## Pasos de Configuraci√≥n: ‚öôÔ∏è

### Paso 1: Configuraci√≥n de IPs Est√°ticas üîó

Se configuraron las interfaces de red para usar direcciones IP est√°ticas en lugar de DHCP.

**Comandos (Ejemplo para VM1: `nodo-coordinadorwz`):**

1.  **Listar las conexiones de red existentes** para identificar el nombre de la interfaz (ej. `ensxx`):
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ sudo nmcli connection show
    ```

2.  **Modificar la configuraci√≥n de la interfaz de red** con la IP est√°tica, m√°scara de subred, gateway y DNS. 
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ sudo nmcli connection modify ensxx ipv4.method manual ipv4.addresses 192.168.1.10/24 ipv4.gateway 192.168.1.1 ipv4.dns 192.168.1.1 connection.autoconnect yes
    ```
    * üìù **Nota:** Para **VM2 (`nodo-datoswz`)**, el comando ser√≠a similar, pero con `ipv4.addresses 192.168.1.20/24`. El gateway y el DNS (`192.168.1.1`) ser√≠an los mismos en ambas VMs.

3.  **Reiniciar la interfaz de red** para aplicar los cambios:
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ sudo nmcli connection up ensxx
    ```

4.  **Verificar la configuraci√≥n IP** de la interfaz:
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ ip a show ensxx
    ```
    **‚úÖ Salida Esperada (fragmento para VM1: `nodo-coordinadorwz`):**
    ```
    inet 192.168.1.10/24 brd 192.168.1.255 scope global noprefixroute ensxx
    ```

‚ú® --- ‚ú®

### Paso 2: Configuraci√≥n de Hostnames y FQDN üñ•Ô∏è

Se estableci√≥ el nombre de host de cada m√°quina y su FQDN (Fully Qualified Domain Name).

**Comandos (Ejemplo para VM1: `nodo-coordinadorwz`):**

1.  **Establecer el hostname est√°tico:**
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ sudo hostnamectl set-hostname nodo-coordinadorwz.dominio.com.ec
    ```
    * üìù **Nota:** Para **VM2 (`nodo-datoswz`)**, el comando ser√≠a `sudo hostnamectl set-hostname nodo-datoswz.dominio.com.ec`.

2.  **Verificar el hostname configurado:**
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ hostnamectl
    ```
    **‚úÖ Salida Esperada (fragmento para VM1: `nodo-coordinadorwz`):**
    ```
          Static hostname: nodo-coordinadorwz.dominio.com.ec
               Icon name: computer-vm
                 Chassis: vm
              Machine ID: [...]
                 Boot ID: [...]
          Virtualization: kvm
        Operating System: Rocky Linux 9.4 (Blue Onyx)
             CPE OS Name: cpe:/o:rocky:rocky:9::baseos
                  Kernel: Linux 5.14.0-431.el9.x86_64
            Architecture: x86-64
         Hardware Vendor: Red Hat
          Hardware Model: KVM
    ```

‚ú® --- ‚ú®

### Paso 3: Configuraci√≥n de `/etc/hosts` y `/etc/resolv.conf` üåê

Se configuraron estos archivos en ambas VMs para asegurar la resoluci√≥n de nombres interna (sin depender inicialmente de un servidor DNS externo) y la configuraci√≥n del servidor DNS primario de la red.

**Comandos (a realizar en AMBAS VMs):**

1.  **Editar el archivo `/etc/hosts`** para a√±adir las entradas de resoluci√≥n de nombres locales:
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ sudo nano /etc/hosts
    ```
    **Contenido a√±adido al final del archivo:**
    ```
    # Entradas para SIEM Wazuh
    192.168.1.10  nodo-coordinadorwz.dominio.com.ec  nodo-coordinadorwz
    192.168.1.20  nodo-datoswz.dominio.com.ec      nodo-datoswz
    ```

2.  **Configurar el archivo `/etc/resolv.conf`** para especificar el servidor DNS de la red:
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ sudo nano /etc/resolv.conf
    ```
    **Contenido a√±adido/modificado:**
    ```
    nameserver 192.168.1.1
    search dominio.com.ec
    ```
    * üìù **Nota:** Se asume que `192.168.1.1` es la direcci√≥n IP del servidor DNS primario de la red.

3.  **Verificar la resoluci√≥n de nombres** y la conectividad entre las VMs (ejemplo de verificaci√≥n desde `nodo-coordinadorwz`):
    üíª ```bash
    [admin@nodo-coordinadorwz ~]$ ping -c 3 nodo-datoswz.dominio.com.ec
    [admin@nodo-coordinadorwz ~]$ ping -c 3 nodo-datoswz
    ```
    **‚úÖ Salida Esperada:**
    Pings exitosos a la direcci√≥n IP `192.168.1.20`, confirmando la resoluci√≥n tanto por FQDN como por hostname corto.

---